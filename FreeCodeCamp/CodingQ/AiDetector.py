"""
AI Detector
Today's challenge is inspired by the release of ChatGPT on November 30, 2022.

Given a string of one or more sentences, determine if it was likely generated by AI using the following rules:

It contains two or more dashes (-).

It contains two or more sets of parenthesis (()). Text can be within the parenthesis.

It contains three or more words with 7 or more letters.

Words are separated by a single space and only consist of letters (A-Z). Don't include punctuation or other non-letters as part of a word.

If the given sentence meets any of the rules above, return "AI", otherwise, return "Human".
"""

import unittest

class AiDetectorTest(unittest.TestCase):

    def test1(self):
        self.assertEqual(detect_ai("The quick brown fox jumped over the lazy dog."), "Human")

    def test2(self):
        self.assertEqual(detect_ai("The hupersonic brown fox - jumped (over) the lazy dog."),"Human")
    
    def test3(self):
        self.assertEqual(detect_ai("Yes - you're right! I made a mistake there - let me try again."),"AI")

    def test4(self):
        self.assertEqual(detect_ai("The extraordinary students were studying vivaciously."), "AI")

    def test5(self):
        self.assertEqual(detect_ai("The (excited) student was (coding) in the library."),"AI")

import re
def detect_ai(text):
    """
    Initialization necessity
    The initialization for the count, words, paranthesis = False, False, False.
    without that, if none of the conditions are met, those variables would never be assigned, and Python would throw UnboundLocalError.
    Python is dynamic, but is still requires variables to be defined before use.

    """
    count, words, paranthesis = False, False , False
    if text.count('-') >= 2:
        count = True
    """
    Paranthesis detection
    Your current check only counts words that start and end with parentheses, e.g. (example).
    But the rule says "two or more sets of parantheses" -- text can be inside. Using regex is more robust.
    """
    paran_words = []
    for word in text.split():
        if word.startswith("(") and word.endswith(")"):
            paran_words.append(word)
        
    if len(paran_words) >= 2:
        paranthesis = True
    

    """
    Word extraction
    The problem specifies words are only letters A-Z. Your text.split() will include punctuation.
    Safer: use regex to extract words:
    """
    ai_words = []
    for word in text.split():
        if len(word) >= 7:
            ai_words.append(word)
        
    if len(ai_words) >= 3:
        words = True


    if any([count, paranthesis, words]):
        return "AI"
    else:
        return "Human"
    


def detect_ai_refined(text):
    count, words, paranthesis = False, False, False

    # Rule 1: dashes
    if text.count("-") >= 2:
        count = True
    
    # Rule 2: paranthesis
    if len(re.findall(r"\([^)]*\)",text)) >= 2:
        paranthesis = True
    
    # Rule 3: long words

    words_list = re.findall(r"[A-Za-z]+",text)
    if sum(1 for w in words if len(w) >= 7) >=3:
        words = True

    return "AI" if any([count,paranthesis,words]) else "Human"


def detect_ai_optimized(text):

    # Rule 1: two or more dashes

    if text.count("-") >= 2:
        return "AI"
    
    # Rule 2: two or more sets of parentheses

    if len(re.findall(r"\([^)]*\)",text)) >= 2:
        return "AI"
    
    # Rule 3: three  or more words with 7+ letters

    # Extract words (only letters A-Z)

    words = re.findall(r"[A-Za-z]+",text)
    long_words = sum(1 for w in words if len(w) >= 7)
    if long_words >= 3:
        return "AI"
    
    return "Human"


if __name__ == "__main__":
    print(detect_ai("The quick brown fox jumps over the lazy dog."))
    unittest.main()